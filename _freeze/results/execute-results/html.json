{
  "hash": "843c71af5d8fde549906f55ad0888578",
  "result": {
    "markdown": "# Results\n\n\n::: {.cell}\n\n:::\n\n\n## Preparation\n\nThe code @lst-ghs-osmium covered the following area:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Osmium command\nosmium extract -b -51.2791,-30.1722,-50.9407,-29.8048 sul-240501.osm.pbf -o puerto_alegre_urban_center.osm.pbf\n```\n:::\n\n\n![](/media/bbox_porto_alegre_ghs.png){fig-align=\"center\" width=\"50%\"}\n\n## Framework\n\n## OSM & ORS\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load data\nosm_network <- st_read(eisenberg_connection, layer=\"\")\nors_network <- st_read(eisenberg_connection, layer=\"porto_alegre_net_pre\")\n\nors_network_subset <- ors_network |> head()\n  \n#leaflet() |>\n#  addProviderTiles(\"Esri.WorldImagery\", group=\"Esri.WorldImagery\") |>\n#  addPolylines(data= ors_network_subset$the_geom, color)\n```\n:::\n\n\n## Sampling points\n## Network\n\n### Closeness\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Import he data\n## hospital with closenesss values\nclosseness <-sf::st_read(eisenberg_connection, \n                            layer = \"clossness_hospital_porto\")\nclosseness_df <- closseness |>  arrange(ds_cnes, closeness) |>\n                    mutate(lng= \n                              unlist(map(geom_hospital,1)),\n                           lat=\n                              unlist(map(geom_hospital,2)),\n                           closeness_norm = \n                          (closseness$closeness - min(closseness$closeness)) / (max(closseness$closeness) - min(closseness$closeness)) * 100,\n                          position = rank(-closeness))\n## Create Color palette for visualization\npal <- colorQuantile(palette = \"OrRd\",closseness_df$closeness, n=4 )\n\n## Create leaflet product\n\nicons <- makeAwesomeIcon(\n  icon = 'fa-heartbeat',\n  iconColor = \"#FFFFFF\",\n  markerColor = \"#57142c\",\n  library = \"fa\"\n)\nleaflet(closseness_df) |>\n    addProviderTiles(providers$OpenStreetMap.HOT) |>\n    addCircles(data =closseness_df , radius = ~sqrt(closeness)*10, fillOpacity = .50, color =~pal(closeness)) |>\n  addAwesomeMarkers(data=closseness_df,\n                          icon =icons,\n                          popup= ~paste0(\"<b>Código CNES: </b>\", cd_cnes, \"<br/>\",\n                                   \"<b>Nome: </b>\", ds_cnes, \"<br/>\",\n                                   \"<b> Closeness</b>:\", closeness, \"<br/>\",\n                                   \"<b>Longitude: </b>\", lng, \"<br/>\",\n                                   \"<b>Posição </b>\", position, \"<br/>\"))\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"leaflet html-widget html-fill-item\" id=\"htmlwidget-c91fa2503961d0436aa4\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-c91fa2503961d0436aa4\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap.HOT\",null,null,{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false}]},{\"method\":\"addCircles\",\"args\":[[-30.09757,-30.009986,-30.039221,-30.084683,-29.940535,-30.047191,-30.028825,-30.061433,-30.059575,-30.026562,-29.822993,-30.016762,-30.044897,-29.906482,-29.839313,-30.056013,-29.88663,-30.037009,-30.081734,-30.030225],[-51.251219,-51.15921,-51.20721,-51.188157,-50.994548,-51.211842,-51.206359,-51.149065,-51.229305,-51.208747,-51.165688,-51.159139,-51.217128,-51.198458,-51.161951,-51.172921,-51.165818,-51.209228,-51.02973,-51.222786],[1820.906367719109,1629.417073680032,1439.687466084219,1684.903558070906,1948.871468311854,1429.82516413721,1449.482666333061,1614.280025274425,1592.45094115957,1487.212157024007,2062.595452336691,1621.758305050417,1449.551654822966,1888.464985113571,2107.889940200864,1532.579524853441,1916.141957162882,1422.392350935564,2092.343184088117,1485.05892138999],null,null,{\"interactive\":true,\"className\":\"\",\"stroke\":true,\"color\":[\"#FC8D59\",\"#FC8D59\",\"#FEF0D9\",\"#FC8D59\",\"#D7301F\",\"#FEF0D9\",\"#FEF0D9\",\"#FDCC8A\",\"#FDCC8A\",\"#FDCC8A\",\"#D7301F\",\"#FC8D59\",\"#FEF0D9\",\"#FC8D59\",\"#D7301F\",\"#FDCC8A\",\"#D7301F\",\"#FEF0D9\",\"#D7301F\",\"#FDCC8A\"],\"weight\":5,\"opacity\":0.5,\"fill\":true,\"fillColor\":[\"#FC8D59\",\"#FC8D59\",\"#FEF0D9\",\"#FC8D59\",\"#D7301F\",\"#FEF0D9\",\"#FEF0D9\",\"#FDCC8A\",\"#FDCC8A\",\"#FDCC8A\",\"#D7301F\",\"#FC8D59\",\"#FEF0D9\",\"#FC8D59\",\"#D7301F\",\"#FDCC8A\",\"#D7301F\",\"#FEF0D9\",\"#D7301F\",\"#FDCC8A\"],\"fillOpacity\":0.5},null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null,null]},{\"method\":\"addAwesomeMarkers\",\"args\":[[-30.09757,-30.009986,-30.039221,-30.084683,-29.940535,-30.047191,-30.028825,-30.061433,-30.059575,-30.026562,-29.822993,-30.016762,-30.044897,-29.906482,-29.839313,-30.056013,-29.88663,-30.037009,-30.081734,-30.030225],[-51.251219,-51.15921,-51.20721,-51.188157,-50.994548,-51.211842,-51.206359,-51.149065,-51.229305,-51.208747,-51.165688,-51.159139,-51.217128,-51.198458,-51.161951,-51.172921,-51.165818,-51.209228,-51.02973,-51.222786],{\"icon\":\"fa-heartbeat\",\"markerColor\":\"#57142c\",\"iconColor\":\"#FFFFFF\",\"spin\":false,\"squareMarker\":false,\"iconRotate\":0,\"font\":\"monospace\",\"prefix\":\"fa\"},null,null,{\"interactive\":true,\"draggable\":false,\"keyboard\":true,\"title\":\"\",\"alt\":\"\",\"zIndexOffset\":0,\"opacity\":1,\"riseOnHover\":false,\"riseOffset\":250},[\"<b>Código CNES: <\\/b>2237156<br/><b>Nome: <\\/b>HBMPA<br/><b> Closeness<\\/b>:33157<br/><b>Longitude: <\\/b>-51.251136<br/><b>Posição <\\/b>7<br/>\",\"<b>Código CNES: <\\/b>2265060<br/><b>Nome: <\\/b>HOSPITAL CRISTO REDENTOR SA<br/><b> Closeness<\\/b>:26550<br/><b>Longitude: <\\/b>-51.159402<br/><b>Posição <\\/b>9<br/>\",\"<b>Código CNES: <\\/b>2237601<br/><b>Nome: <\\/b>HOSPITAL DE CLINICAS<br/><b> Closeness<\\/b>:20727<br/><b>Longitude: <\\/b>-51.206436<br/><b>Posição <\\/b>18<br/>\",\"<b>Código CNES: <\\/b>2237598<br/><b>Nome: <\\/b>HOSPITAL DIVINA PROVIDENCIA<br/><b> Closeness<\\/b>:28389<br/><b>Longitude: <\\/b>-51.18811<br/><b>Posição <\\/b>8<br/>\",\"<b>Código CNES: <\\/b>2232049<br/><b>Nome: <\\/b>HOSPITAL DOM JOAO BECKER<br/><b> Closeness<\\/b>:37981<br/><b>Longitude: <\\/b>-50.994036<br/><b>Posição <\\/b>4<br/>\",\"<b>Código CNES: <\\/b>3567664<br/><b>Nome: <\\/b>HOSPITAL ERNESTO DORNELLES<br/><b> Closeness<\\/b>:20444<br/><b>Longitude: <\\/b>-51.211891<br/><b>Posição <\\/b>19<br/>\",\"<b>Código CNES: <\\/b>2265052<br/><b>Nome: <\\/b>HOSPITAL FEMINA SA<br/><b> Closeness<\\/b>:21010<br/><b>Longitude: <\\/b>-51.206837<br/><b>Posição <\\/b>17<br/>\",\"<b>Código CNES: <\\/b>7092571<br/><b>Nome: <\\/b>HOSPITAL INDEPENDENCIA<br/><b> Closeness<\\/b>:26059<br/><b>Longitude: <\\/b>-51.149056<br/><b>Posição <\\/b>11<br/>\",\"<b>Código CNES: <\\/b>3007847<br/><b>Nome: <\\/b>HOSPITAL MAE DE DEUS<br/><b> Closeness<\\/b>:25359<br/><b>Longitude: <\\/b>-51.229103<br/><b>Posição <\\/b>12<br/>\",\"<b>Código CNES: <\\/b>3006522<br/><b>Nome: <\\/b>HOSPITAL MOINHOS DE VENTO<br/><b> Closeness<\\/b>:22118<br/><b>Longitude: <\\/b>-51.209105<br/><b>Posição <\\/b>14<br/>\",\"<b>Código CNES: <\\/b>2232162<br/><b>Nome: <\\/b>HOSPITAL MUNICIPAL GETULIO VARGASSAPUCAIA DO SUL<br/><b> Closeness<\\/b>:42543<br/><b>Longitude: <\\/b>-51.165855<br/><b>Posição <\\/b>3<br/>\",\"<b>Código CNES: <\\/b>2237571<br/><b>Nome: <\\/b>HOSPITAL NOSSA SENHORA DA CONCEICAO SA<br/><b> Closeness<\\/b>:26301<br/><b>Longitude: <\\/b>-51.159043<br/><b>Posição <\\/b>10<br/>\",\"<b>Código CNES: <\\/b>5026253<br/><b>Nome: <\\/b>HOSPITAL PORTO ALEGRE<br/><b> Closeness<\\/b>:21012<br/><b>Longitude: <\\/b>-51.216909<br/><b>Posição <\\/b>16<br/>\",\"<b>Código CNES: <\\/b>3626245<br/><b>Nome: <\\/b>HOSPITAL PRONTO SOCORRO DE CANOAS DEP NELSON MARCHEZAN<br/><b> Closeness<\\/b>:35663<br/><b>Longitude: <\\/b>-51.198125<br/><b>Posição <\\/b>6<br/>\",\"<b>Código CNES: <\\/b>2232030<br/><b>Nome: <\\/b>HOSPITAL SAO CAMILOESTEIO<br/><b> Closeness<\\/b>:44432<br/><b>Longitude: <\\/b>-51.161425<br/><b>Posição <\\/b>1<br/>\",\"<b>Código CNES: <\\/b>2262568<br/><b>Nome: <\\/b>HOSPITAL SAO LUCAS DA PUCRS<br/><b> Closeness<\\/b>:23488<br/><b>Longitude: <\\/b>-51.173383<br/><b>Posição <\\/b>13<br/>\",\"<b>Código CNES: <\\/b>3508528<br/><b>Nome: <\\/b>HOSPITAL UNIVERSITARIO ULBRA<br/><b> Closeness<\\/b>:36716<br/><b>Longitude: <\\/b>-51.166042379<br/><b>Posição <\\/b>5<br/>\",\"<b>Código CNES: <\\/b>2778718<br/><b>Nome: <\\/b>HPS PORTO ALEGRE<br/><b> Closeness<\\/b>:20232<br/><b>Longitude: <\\/b>-51.209252<br/><b>Posição <\\/b>20<br/>\",\"<b>Código CNES: <\\/b>5223962<br/><b>Nome: <\\/b>INSTITUTO DE CARDIOLOGIA HOSPITAL VIAMAO<br/><b> Closeness<\\/b>:43779<br/><b>Longitude: <\\/b>-51.030015<br/><b>Posição <\\/b>2<br/>\",\"<b>Código CNES: <\\/b>2237253<br/><b>Nome: <\\/b>IRMANDADE DA SANTA CASA DE MISERICORDIA DE PORTO ALEGRE<br/><b> Closeness<\\/b>:22054<br/><b>Longitude: <\\/b>-51.222617<br/><b>Posição <\\/b>15<br/>\"],null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"limits\":{\"lat\":[-30.09757,-29.822993],\"lng\":[-51.251219,-50.994548]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::",
    "supporting": [
      "results_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/leaflet-1.3.1/leaflet.js\"></script>\n<link href=\"site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/proj4-2.6.2/proj4.min.js\"></script>\n<script src=\"site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\n<link href=\"site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/leaflet-binding-2.2.2/leaflet.js\"></script>\n<script src=\"site_libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js\"></script>\n<script src=\"site_libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js\"></script>\n<link href=\"site_libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js\"></script>\n<link href=\"site_libs/fontawesome-4.7.0/font-awesome.min.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}