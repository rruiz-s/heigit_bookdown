{
  "hash": "f8269e9e1777092a6a328fc741464552",
  "result": {
    "markdown": "# Performance tests\n### Performance\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlapply(c(\"readODS\",\"tidyverse\",\"ggplot2\",\"DT\"), require, character.only =TRUE)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: readODS\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: tidyverse\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\nLoading required package: DT\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[[1]]\n[1] TRUE\n\n[[2]]\n[1] TRUE\n\n[[3]]\n[1] TRUE\n\n[[4]]\n[1] TRUE\n```\n:::\n\n```{.r .cell-code}\nperformance <- readODS::read_ods(\"metrics.ods\")\ndf <- performance |> dplyr::select(c(\"number_od\",\"method\",\"algorithm\",\"time\",\"max_centrality\",\"count_rows\",\"query\",\"analyze\")) |> filter(!is.na(time) & method=='naive')\n\nggplot(df,aes(x=number_od, y=time, group = algorithm)) +\n  labs(x=\"Number of Origin-Destination (OD)\",\n       y=\"time (ms)\",\n       title=\"PostgreSQL's queries performance\") +\n  geom_line(aes(color=algorithm)) +\n   geom_point(aes(color=algorithm)) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](appendix_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n\n```{.r .cell-code}\nDT::datatable(subset(df, select=c(\"number_od\",\"algorithm\",\"time\",\"query\",\"analyze\")), \n              class='compact', rownames=FALSE, escape=FALSE, caption='Data description',\n              extensions=c(\"Buttons\",'RowGroup'),\n              options=list(\n                  order=list(list(0, 'asc'), list(2,'asc')),  # Sort by the first column (index 0)\n                  rowGroup=list(dataSrc=0),    # Fixed rowGroup\n                  dom=\"Bfrtip\",\n                  columnDefs = list(list(visible=FALSE, targets= c(3,4))),\n                  buttons=c(\"copy\", \"csv\", \"pdf\"),\n                  initComplete = JS(\n                      \"function(settings, json) {\",\n                      \"$(this.api().table().header()).css({'background-color': '#d50038', 'color': '#fff'});\",\n                      \"}\")\n              )\n) |> \n    DT::formatStyle(\"time\",\n                    background=DT::styleColorBar(range(df$time), '#ee8b8b'),\n                    backgroundSize='98% 88%',\n                    backgroundRepeat='no-repeat',\n                    backgroundPosition='center')\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-b5492873efce7630b7e2\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-b5492873efce7630b7e2\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"extensions\":[\"Buttons\",\"RowGroup\"],\"caption\":\"<caption>Data description<\\/caption>\",\"data\":[[100,10,50,200,300,10,50,100,200,10,50,100,200,300,10,50,100,200],[\"pgr_dijkstra()\",\"pgr_dijkstra()\",\"pgr_dijkstra()\",\"pgr_dijkstra()\",\"pgr_dijkstra()\",\"pgr_bdDijkstra()\",\"pgr_bdDijkstra()\",\"pgr_bdDijkstra()\",\"pgr_bdDijkstra()\",\"pgr_astrar()\",\"pgr_astrar()\",\"pgr_astrar()\",\"pgr_astrar()\",\"pgr_astrar()\",\"pgr_bdastrar()\",\"pgr_bdastrar()\",\"pgr_bdastrar()\",\"pgr_bdastrar()\"],[11183.865,620.371,3691.958,34613.245,75505.38800000001,1451.953,26234.063,108916.104,426489.553,770.139,4390.494,12319.547,38444.056,89211.976,1667.918,27935.192,110424.801,430940.623],[\"EXPLAIN ANALYZE CREATE TABLE centrality_100_100_porto as  SELECT   b.ogc_fid,  b.the_geom,  count(the_geom) as centrality FROM  pgr_dijkstra('SELECT         ogc_fid AS id,        fromid AS source,       toid AS target,        weight AS cost      FROM porto_alegre_net_largest',       ARRAY(SELECT net_id AS start_id FROM random_100_origin  ),       ARRAY(SELECT net_id AS end_id FROM random_100_destination ),       directed := TRUE) j     left JOIN porto_alegre_net_largest AS b       ON j.edge = b.ogc_fid  GROUP BY  b.ogc_fid, b.the_geom  ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE CREATE TABLE centrality_10_10_porto as  WITH random_10_origin AS( SELECT * FROM random_100_origin  ORDER BY random() LIMIT 10), random_10_destination AS ( SELECT * FROM random_100_destination  ORDER BY random() LIMIT 10) SELECT   b.ogc_fid,  b.the_geom,  count(the_geom) as centrality FROM  pgr_dijkstra('SELECT         ogc_fid AS id,        fromid AS source,       toid AS target,        weight AS cost      FROM porto_alegre_net_largest',       ARRAY(SELECT net_id AS start_id FROM random_10_origin  ),       ARRAY(SELECT net_id AS end_id FROM random_10_destination ),       directed := TRUE) j     left JOIN porto_alegre_net_largest AS b       ON j.edge = b.ogc_fid  GROUP BY  b.ogc_fid, b.the_geom  ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE CREATE TABLE centrality_50_50_porto AS SELECT   b.ogc_fid,  b.the_geom,  count(the_geom) as centrality FROM  pgr_dijkstra('SELECT         ogc_fid AS id,        fromid AS source,       toid AS target,        weight AS cost      FROM porto_alegre_net_largest',       ARRAY(SELECT net_id AS start_id FROM random_50_origin  ),       ARRAY(SELECT net_id AS end_id FROM random_50_destination ),       directed := TRUE) j     left JOIN porto_alegre_net_largest AS b       ON j.edge = b.ogc_fid  GROUP BY  b.ogc_fid, b.the_geom  ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE  CREATE TABLE centrality_200_200_porto AS  SELECT   b.ogc_fid,  b.the_geom,  count(the_geom) as centrality   FROM  pgr_dijkstra('SELECT  ogc_fid AS id,          fromid AS source,        toid AS target,        weight AS cost           FROM porto_alegre_net_largest',           ARRAY(SELECT net_id AS start_id FROM sampling_weight_200_origin  ),           ARRAY(SELECT net_id AS end_id FROM sampling_weight_200_destination ),           directed := TRUE) j           left JOIN porto_alegre_net_largest AS b           ON j.edge = b.ogc_fid           GROUP BY  b.ogc_fid, b.the_geom           ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE  CREATE TABLE centrality_300_300_porto AS  SELECT   b.ogc_fid,  b.the_geom,  count(the_geom) as centrality   FROM  pgr_dijkstra('SELECT  ogc_fid AS id,          fromid AS source,        toid AS target,        weight AS cost           FROM porto_alegre_net_largest',           ARRAY(SELECT net_id AS start_id FROM sampling_weight_300_origin  ),           ARRAY(SELECT net_id AS end_id FROM sampling_weight_300_destination ),           directed := TRUE) j           left JOIN porto_alegre_net_largest AS b           ON j.edge = b.ogc_fid           GROUP BY  b.ogc_fid, b.the_geom           ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE  CREATE TABLE centrality_10_10_porto_bdijstra AS  SELECT   b.ogc_fid,  b.the_geom,  count(the_geom) as centrality   FROM  pgr_bdDijkstra('SELECT  ogc_fid AS id,                               fromid AS source,                             toid AS target,                             weight AS cost                       FROM porto_alegre_net_largest',                       ARRAY(SELECT net_id AS start_id FROM random_10_origin),                       ARRAY(SELECT net_id AS end_id FROM random_10_destination),                       directed := TRUE) j                       left JOIN porto_alegre_net_largest AS b                       ON j.edge = b.ogc_fid                       GROUP BY  b.ogc_fid, b.the_geom                       ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE  CREATE TABLE centrality_50_50_porto_bdijstra AS  SELECT   b.ogc_fid,  b.the_geom,  count(the_geom) as centrality   FROM  pgr_bdDijkstra('SELECT  ogc_fid AS id,                               fromid AS source,                             toid AS target,                             weight AS cost                       FROM porto_alegre_net_largest',                       ARRAY(SELECT net_id AS start_id FROM random_50_origin),                       ARRAY(SELECT net_id AS end_id FROM random_50_destination),                       directed := TRUE) j                       left JOIN porto_alegre_net_largest AS b                       ON j.edge = b.ogc_fid                       GROUP BY  b.ogc_fid, b.the_geom                       ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE  CREATE TABLE centrality_100_100_porto_bdijstra AS  SELECT   b.ogc_fid,  b.the_geom,  count(the_geom) as centrality   FROM  pgr_bdDijkstra('SELECT  ogc_fid AS id,                               fromid AS source,                             toid AS target,                             weight AS cost                       FROM porto_alegre_net_largest',                       ARRAY(SELECT net_id AS start_id FROM random_100_origin),                       ARRAY(SELECT net_id AS end_id FROM random_100_destination),                       directed := TRUE) j                       left JOIN porto_alegre_net_largest AS b                       ON j.edge = b.ogc_fid                       GROUP BY  b.ogc_fid, b.the_geom                       ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE  CREATE TABLE centrality_200_200_porto_bdijstra AS  SELECT   b.ogc_fid,  b.the_geom,  count(the_geom) as centrality   FROM  pgr_bdDijkstra('SELECT  ogc_fid AS id,                               fromid AS source,                             toid AS target,                             weight AS cost                       FROM porto_alegre_net_largest',                       ARRAY(SELECT net_id AS start_id FROM sampling_weight_200_origin ),                       ARRAY(SELECT net_id AS end_id FROM sampling_weight_200_destination),                       directed := TRUE) j                       left JOIN porto_alegre_net_largest AS b                       ON j.edge = b.ogc_fid                       GROUP BY  b.ogc_fid, b.the_geom                       ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE CREATE TABLE centrality_10_10_porto_astrar AS SELECT    b.ogc_fid,   b.the_geom,   count(the_geom) as centrality  FROM pgr_astar(  'SELECT ogc_fid AS id,    fromid AS source,    toid AS target,    weight AS cost,    x1,    y1,    x2,    y2  FROM porto_alegre_net_largest_astar',  ARRAY(SELECT net_id FROM  random_10_origin),  ARRAY(SELECT net_id FROM  random_10_destination),        directed:=TRUE,        heuristic:=2) j                       left JOIN porto_alegre_net_largest_astar AS b                       ON j.edge = b.ogc_fid                       GROUP BY  b.ogc_fid, b.the_geom                       ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE CREATE TABLE centrality_50_50_porto_astrar AS SELECT    b.ogc_fid,   b.the_geom,   count(the_geom) as centrality  FROM pgr_astar(  'SELECT ogc_fid AS id,    fromid AS source,    toid AS target,    weight AS cost,    x1,    y1,    x2,    y2  FROM porto_alegre_net_largest_astar',  ARRAY(SELECT net_id FROM  random_50_origin),  ARRAY(SELECT net_id FROM  random_50_destination),        directed:=TRUE,        heuristic:=2) j                       left JOIN porto_alegre_net_largest_astar AS b                       ON j.edge = b.ogc_fid                       GROUP BY  b.ogc_fid, b.the_geom                       ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE CREATE TABLE centrality_100_100_porto_astrar AS SELECT    b.ogc_fid,   b.the_geom,   count(the_geom) as centrality  FROM pgr_astar(  'SELECT ogc_fid AS id,    fromid AS source,    toid AS target,    weight AS cost,    x1,    y1,    x2,    y2  FROM porto_alegre_net_largest_astar',  ARRAY(SELECT net_id FROM  random_100_origin),  ARRAY(SELECT net_id FROM  random_100_destination),        directed:=TRUE,        heuristic:=2) j                       left JOIN porto_alegre_net_largest_astar AS b                       ON j.edge = b.ogc_fid                       GROUP BY  b.ogc_fid, b.the_geom                       ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE CREATE TABLE centrality_200_200_porto_astrar AS SELECT    b.ogc_fid,   b.the_geom,   count(the_geom) as centrality  FROM pgr_astar(  'SELECT ogc_fid AS id,    fromid AS source,    toid AS target,    weight AS cost,    x1,    y1,    x2,    y2  FROM porto_alegre_net_largest_astar',  ARRAY(SELECT net_id FROM  sampling_weight_200_origin),  ARRAY(SELECT net_id FROM  sampling_weight_200_destination),        directed:=TRUE,        heuristic:=2) j                       left JOIN porto_alegre_net_largest_astar AS b                       ON j.edge = b.ogc_fid                       GROUP BY  b.ogc_fid, b.the_geom                       ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE CREATE TABLE centrality_300_300_porto_astrar AS SELECT    b.ogc_fid,   b.the_geom,   count(the_geom) as centrality  FROM pgr_astar(  'SELECT ogc_fid AS id,    fromid AS source,    toid AS target,    weight AS cost,    x1,    y1,    x2,    y2  FROM porto_alegre_net_largest_astar',  ARRAY(SELECT net_id FROM  sampling_weight_300_origin),  ARRAY(SELECT net_id FROM  sampling_weight_300_destination),        directed:=TRUE,        heuristic:=2) j                       left JOIN porto_alegre_net_largest_astar AS b                       ON j.edge = b.ogc_fid                       GROUP BY  b.ogc_fid, b.the_geom                       ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE CREATE TABLE centrality_10_10_porto_bdastrar AS SELECT    b.ogc_fid,   b.the_geom,   count(the_geom) as centrality  FROM pgr_bdAstar(  'SELECT ogc_fid AS id,    fromid AS source,    toid AS target,    weight AS cost,    x1,    y1,    x2,    y2  FROM porto_alegre_net_largest_astar',  ARRAY(SELECT net_id FROM  random_10_origin),  ARRAY(SELECT net_id FROM  random_10_destination),        directed:=TRUE,        heuristic:=2) j                       left JOIN porto_alegre_net_largest_astar AS b                       ON j.edge = b.ogc_fid                       GROUP BY  b.ogc_fid, b.the_geom                       ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE CREATE TABLE centrality_50_50_porto_bdastrar AS SELECT    b.ogc_fid,   b.the_geom,   count(the_geom) as centrality  FROM pgr_bdAstar(  'SELECT ogc_fid AS id,    fromid AS source,    toid AS target,    weight AS cost,    x1,    y1,    x2,    y2  FROM porto_alegre_net_largest_astar',  ARRAY(SELECT net_id FROM  random_50_origin),  ARRAY(SELECT net_id FROM  random_50_destination),        directed:=TRUE,        heuristic:=2) j                       left JOIN porto_alegre_net_largest_astar AS b                       ON j.edge = b.ogc_fid                       GROUP BY  b.ogc_fid, b.the_geom                       ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE CREATE TABLE centrality_100_100_porto_bdastrar AS SELECT    b.ogc_fid,   b.the_geom,   count(the_geom) as centrality  FROM pgr_bdAstar(  'SELECT ogc_fid AS id,    fromid AS source,    toid AS target,    weight AS cost,    x1,    y1,    x2,    y2  FROM porto_alegre_net_largest_astar',  ARRAY(SELECT net_id FROM  random_100_origin),  ARRAY(SELECT net_id FROM  random_100_destination),        directed:=TRUE,        heuristic:=2) j                       left JOIN porto_alegre_net_largest_astar AS b                       ON j.edge = b.ogc_fid                       GROUP BY  b.ogc_fid, b.the_geom                       ORDER BY centrality DESC;\",\"EXPLAIN ANALYZE CREATE TABLE centrality_200_200_porto_bdastrar AS SELECT    b.ogc_fid,   b.the_geom,   count(the_geom) as centrality  FROM pgr_bdAstar(  'SELECT ogc_fid AS id,    fromid AS source,    toid AS target,    weight AS cost,    x1,    y1,    x2,    y2  FROM porto_alegre_net_largest_astar',  ARRAY(SELECT net_id FROM  sampling_weight_200_origin),  ARRAY(SELECT net_id FROM  sampling_weight_200_destination),        directed:=TRUE,        heuristic:=2) j                       left JOIN porto_alegre_net_largest_astar AS b                       ON j.edge = b.ogc_fid                       GROUP BY  b.ogc_fid, b.the_geom                       ORDER BY centrality DESC;\"],[\"Sort  (cost=3165.08..3167.58 rows=1000 width=64) (actual time=11135.237..11138.781 rows=21673 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 2631kB   InitPlan 1 (returns $0)     ->  Seq Scan on random_100_origin  (cost=0.00..2.00 rows=100 width=8) (actual time=0.026..0.057 rows=100 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on random_100_destination  (cost=0.00..2.00 rows=100 width=8) (actual time=0.011..0.041 rows=100 loops=1)   ->  HashAggregate  (cost=3101.25..3111.25 rows=1000 width=64) (actual time=11123.499..11130.252 rows=21673 loops=1)         Group Key: b.ogc_fid, b.the_geom         Batches: 1  Memory Usage: 4881kB         ->  Nested Loop Left Join  (cost=0.67..3093.75 rows=1000 width=56) (actual time=4758.712..10019.941 rows=1787766 loops=1)               ->  Function Scan on pgr_dijkstra j  (cost=0.25..10.25 rows=1000 width=8) (actual time=4758.665..5061.741 rows=1787766 loops=1)               ->  Index Scan using idx_porto_alegre_net_largest_id on porto_alegre_net_largest b  (cost=0.42..3.07 rows=1 width=56) (actual time=0.002..0.002 rows=1 loops=1787766)                     Index Cond: (ogc_fid = j.edge) Planning Time: 0.400 ms Execution Time: 11183.865 ms\",\"Sort  (cost=3163.28..3165.78 rows=1000 width=64) (actual time=607.270..607.810 rows=5303 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 648kB   InitPlan 1 (returns $0)     ->  Seq Scan on random_10_origin  (cost=0.00..1.10 rows=10 width=8) (actual time=0.012..0.015 rows=10 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on random_10_destination  (cost=0.00..1.10 rows=10 width=8) (actual time=0.006..0.008 rows=10 loops=1)   ->  HashAggregate  (cost=3101.25..3111.25 rows=1000 width=64) (actual time=604.275..605.997 rows=5303 loops=1)         Group Key: b.ogc_fid, b.the_geom         Batches: 1  Memory Usage: 1233kB         ->  Nested Loop Left Join  (cost=0.67..3093.75 rows=1000 width=56) (actual time=541.408..593.617 rows=18682 loops=1)               ->  Function Scan on pgr_dijkstra j  (cost=0.25..10.25 rows=1000 width=8) (actual time=541.357..543.010 rows=18682 loops=1)               ->  Index Scan using idx_porto_alegre_net_largest_id on porto_alegre_net_largest b  (cost=0.42..3.07 rows=1 width=56) (actual time=0.002..0.002 rows=1 loops=18682)                     Index Cond: (ogc_fid = j.edge) Planning Time: 0.525 ms Execution Time: 620.371 ms\",\"Sort  (cost=3164.08..3166.58 rows=1000 width=64) (actual time=3663.542..3665.746 rows=15882 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 1749kB   InitPlan 1 (returns $0)     ->  Seq Scan on random_50_origin  (cost=0.00..1.50 rows=50 width=8) (actual time=0.012..0.018 rows=50 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on random_50_destination  (cost=0.00..1.50 rows=50 width=8) (actual time=0.006..0.011 rows=50 loops=1)   ->  HashAggregate  (cost=3101.25..3111.25 rows=1000 width=64) (actual time=3655.387..3660.160 rows=15882 loops=1)         Group Key: b.ogc_fid, b.the_geom         Batches: 1  Memory Usage: 3857kB         ->  Nested Loop Left Join  (cost=0.67..3093.75 rows=1000 width=56) (actual time=2138.588..3394.153 rows=434594 loops=1)               ->  Function Scan on pgr_dijkstra j  (cost=0.25..10.25 rows=1000 width=8) (actual time=2138.493..2212.747 rows=434594 loops=1)               ->  Index Scan using idx_porto_alegre_net_largest_id on porto_alegre_net_largest b  (cost=0.42..3.07 rows=1 width=56) (actual time=0.002..0.002 rows=1 loops=434594)                     Index Cond: (ogc_fid = j.edge) Planning Time: 0.701 ms Execution Time: 3691.958 ms\",\"Sort  (cost=3169.08..3171.58 rows=1000 width=64) (actual time=34499.671..34505.139 rows=28983 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 3259kB   InitPlan 1 (returns $0)     ->  Seq Scan on sampling_weight_200_origin  (cost=0.00..4.00 rows=200 width=8) (actual time=0.102..0.201 rows=200 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on sampling_weight_200_destination  (cost=0.00..4.00 rows=200 width=8) (actual time=0.022..0.125 rows=200 loops=1)   ->  HashAggregate  (cost=3101.25..3111.25 rows=1000 width=64) (actual time=34483.930..34492.477 rows=28983 loops=1)         Group Key: b.ogc_fid, b.the_geom         Batches: 1  Memory Usage: 6673kB         ->  Nested Loop Left Join  (cost=0.67..3093.75 rows=1000 width=56) (actual time=12543.026..30546.777 rows=7071064 loops=1)               ->  Function Scan on pgr_dijkstra j  (cost=0.25..10.25 rows=1000 width=8) (actual time=12542.991..13541.139 rows=7071064 loops=1)               ->  Index Scan using idx_porto_alegre_net_largest_id on porto_alegre_net_largest b  (cost=0.42..3.07 rows=1 width=56) (actual time=0.002..0.002 rows=1 loops=7071064)                     Index Cond: (ogc_fid = j.edge) Planning Time: 0.585 ms Execution Time: 34613.245 ms\",\"Sort  (cost=3173.08..3175.58 rows=1000 width=64) (actual time=75239.661..75244.805 rows=32000 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 3518kB   InitPlan 1 (returns $0)     ->  Seq Scan on sampling_weight_300_origin  (cost=0.00..6.00 rows=300 width=8) (actual time=0.012..0.053 rows=300 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on sampling_weight_300_destination  (cost=0.00..6.00 rows=300 width=8) (actual time=0.007..0.047 rows=300 loops=1)   ->  HashAggregate  (cost=3101.25..3111.25 rows=1000 width=64) (actual time=75223.073..75232.395 rows=32000 loops=1)         Group Key: b.ogc_fid, b.the_geom         Batches: 1  Memory Usage: 6673kB         ->  Nested Loop Left Join  (cost=0.67..3093.75 rows=1000 width=56) (actual time=24895.475..66373.230 rows=15922899 loops=1)               ->  Function Scan on pgr_dijkstra j  (cost=0.25..10.25 rows=1000 width=8) (actual time=24894.983..27429.005 rows=15922899 loops=1)               ->  Index Scan using idx_porto_alegre_net_largest_id on porto_alegre_net_largest b  (cost=0.42..3.07 rows=1 width=56) (actual time=0.002..0.002 rows=1 loops=15922899)                     Index Cond: (ogc_fid = j.edge) Planning Time: 0.639 ms Execution Time: 75505.388 ms\",\"Sort  (cost=3163.28..3165.78 rows=1000 width=64) (actual time=1433.166..1433.511 rows=5303 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 648kB   InitPlan 1 (returns $0)     ->  Seq Scan on random_10_origin  (cost=0.00..1.10 rows=10 width=8) (actual time=0.007..0.009 rows=10 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on random_10_destination  (cost=0.00..1.10 rows=10 width=8) (actual time=0.004..0.007 rows=10 loops=1)   ->  HashAggregate  (cost=3101.25..3111.25 rows=1000 width=64) (actual time=1430.967..1432.186 rows=5303 loops=1)         Group Key: b.ogc_fid, b.the_geom         Batches: 1  Memory Usage: 1233kB         ->  Nested Loop Left Join  (cost=0.67..3093.75 rows=1000 width=56) (actual time=1369.162..1420.553 rows=18682 loops=1)               ->  Function Scan on pgr_bddijkstra j  (cost=0.25..10.25 rows=1000 width=8) (actual time=1369.121..1370.717 rows=18682 loops=1)               ->  Index Scan using idx_porto_alegre_net_largest_id on porto_alegre_net_largest b  (cost=0.42..3.07 rows=1 width=56) (actual time=0.002..0.002 rows=1 loops=18682)                     Index Cond: (ogc_fid = j.edge) Planning Time: 0.255 ms Execution Time: 1451.953 ms\",\"Sort  (cost=3164.08..3166.58 rows=1000 width=64) (actual time=26199.356..26201.586 rows=15914 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 1752kB   InitPlan 1 (returns $0)     ->  Seq Scan on random_50_origin  (cost=0.00..1.50 rows=50 width=8) (actual time=0.014..0.026 rows=50 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on random_50_destination  (cost=0.00..1.50 rows=50 width=8) (actual time=0.007..0.018 rows=50 loops=1)   ->  HashAggregate  (cost=3101.25..3111.25 rows=1000 width=64) (actual time=26191.079..26195.836 rows=15914 loops=1)         Group Key: b.ogc_fid, b.the_geom         Batches: 1  Memory Usage: 3857kB         ->  Nested Loop Left Join  (cost=0.67..3093.75 rows=1000 width=56) (actual time=24833.815..25957.779 rows=435534 loops=1)               ->  Function Scan on pgr_bddijkstra j  (cost=0.25..10.25 rows=1000 width=8) (actual time=24833.767..24896.623 rows=435534 loops=1)               ->  Index Scan using idx_porto_alegre_net_largest_id on porto_alegre_net_largest b  (cost=0.42..3.07 rows=1 width=56) (actual time=0.002..0.002 rows=1 loops=435534)                     Index Cond: (ogc_fid = j.edge) Planning Time: 0.348 ms Execution Time: 26234.063 ms\",\"Sort  (cost=3165.08..3167.58 rows=1000 width=64) (actual time=108861.513..108864.956 rows=21888 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 2649kB   InitPlan 1 (returns $0)     ->  Seq Scan on random_100_origin  (cost=0.00..2.00 rows=100 width=8) (actual time=0.011..0.023 rows=100 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on random_100_destination  (cost=0.00..2.00 rows=100 width=8) (actual time=0.006..0.018 rows=100 loops=1)   ->  HashAggregate  (cost=3101.25..3111.25 rows=1000 width=64) (actual time=108848.834..108855.812 rows=21888 loops=1)         Group Key: b.ogc_fid, b.the_geom         Batches: 1  Memory Usage: 4881kB         ->  Nested Loop Left Join  (cost=0.67..3093.75 rows=1000 width=56) (actual time=102499.589..107760.597 rows=1791360 loops=1)               ->  Function Scan on pgr_bddijkstra j  (cost=0.25..10.25 rows=1000 width=8) (actual time=102499.524..102794.220 rows=1791360 loops=1)               ->  Index Scan using idx_porto_alegre_net_largest_id on porto_alegre_net_largest b  (cost=0.42..3.07 rows=1 width=56) (actual time=0.002..0.002 rows=1 loops=1791360)                     Index Cond: (ogc_fid = j.edge) Planning Time: 0.343 ms Execution Time: 108916.104 ms\",\"Sort  (cost=3169.08..3171.58 rows=1000 width=64) (actual time=426276.331..426280.991 rows=29479 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 3302kB   InitPlan 1 (returns $0)     ->  Seq Scan on sampling_weight_200_origin  (cost=0.00..4.00 rows=200 width=8) (actual time=0.193..0.254 rows=200 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on sampling_weight_200_destination  (cost=0.00..4.00 rows=200 width=8) (actual time=0.150..0.206 rows=200 loops=1)   ->  HashAggregate  (cost=3101.25..3111.25 rows=1000 width=64) (actual time=426258.127..426268.264 rows=29479 loops=1)         Group Key: b.ogc_fid, b.the_geom         Batches: 1  Memory Usage: 6673kB         ->  Nested Loop Left Join  (cost=0.67..3093.75 rows=1000 width=56) (actual time=401173.398..421886.410 rows=7085087 loops=1)               ->  Function Scan on pgr_bddijkstra j  (cost=0.25..10.25 rows=1000 width=8) (actual time=401172.910..402370.334 rows=7085087 loops=1)               ->  Index Scan using idx_porto_alegre_net_largest_id on porto_alegre_net_largest b  (cost=0.42..3.07 rows=1 width=56) (actual time=0.002..0.002 rows=1 loops=7085087)                     Index Cond: (ogc_fid = j.edge) Planning Time: 36.572 ms Execution Time: 426489.553 ms\",\"Sort  (cost=8577.04..8579.54 rows=1000 width=64) (actual time=768.985..769.519 rows=5303 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 648kB   InitPlan 1 (returns $0)     ->  Seq Scan on random_10_origin  (cost=0.00..1.10 rows=10 width=8) (actual time=0.018..0.021 rows=10 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on random_10_destination  (cost=0.00..1.10 rows=10 width=8) (actual time=0.006..0.008 rows=10 loops=1)   ->  GroupAggregate  (cost=8505.01..8525.01 rows=1000 width=64) (actual time=757.833..767.810 rows=5303 loops=1)         Group Key: b.ogc_fid, b.the_geom         ->  Sort  (cost=8505.01..8507.51 rows=1000 width=56) (actual time=757.819..759.974 rows=18682 loops=1)               Sort Key: b.ogc_fid, b.the_geom               Sort Method: quicksort  Memory: 2223kB               ->  Hash Left Join  (cost=8431.43..8455.18 rows=1000 width=56) (actual time=744.178..751.771 rows=18682 loops=1)                     Hash Cond: (j.edge = b.ogc_fid)                     ->  Function Scan on pgr_astar j  (cost=0.25..10.25 rows=1000 width=8) (actual time=676.878..678.130 rows=18682 loops=1)                     ->  Hash  (cost=6236.08..6236.08 rows=175608 width=56) (actual time=67.183..67.184 rows=175608 loops=1)                           Buckets: 262144  Batches: 1  Memory Usage: 16625kB                           ->  Seq Scan on porto_alegre_net_largest_astar b  (cost=0.00..6236.08 rows=175608 width=56) (actual time=0.017..29.060 rows=175608 loops=1) Planning Time: 0.357 ms Execution Time: 770.139 ms\",\"Sort  (cost=8577.84..8580.34 rows=1000 width=64) (actual time=4359.528..4361.735 rows=15882 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 1749kB   InitPlan 1 (returns $0)     ->  Seq Scan on random_50_origin  (cost=0.00..1.50 rows=50 width=8) (actual time=0.509..0.534 rows=50 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on random_50_destination  (cost=0.00..1.50 rows=50 width=8) (actual time=0.271..0.298 rows=50 loops=1)   ->  GroupAggregate  (cost=8505.01..8525.01 rows=1000 width=64) (actual time=4161.448..4356.037 rows=15882 loops=1)         Group Key: b.ogc_fid, b.the_geom         ->  Sort  (cost=8505.01..8507.51 rows=1000 width=56) (actual time=4161.408..4259.997 rows=434594 loops=1)               Sort Key: b.ogc_fid, b.the_geom               Sort Method: external merge  Disk: 26672kB               ->  Hash Left Join  (cost=8431.43..8455.18 rows=1000 width=56) (actual time=3735.785..3921.312 rows=434594 loops=1)                     Hash Cond: (j.edge = b.ogc_fid)                     ->  Function Scan on pgr_astar j  (cost=0.25..10.25 rows=1000 width=8) (actual time=3661.874..3711.643 rows=434594 loops=1)                     ->  Hash  (cost=6236.08..6236.08 rows=175608 width=56) (actual time=73.748..73.749 rows=175608 loops=1)                           Buckets: 262144  Batches: 1  Memory Usage: 16625kB                           ->  Seq Scan on porto_alegre_net_largest_astar b  (cost=0.00..6236.08 rows=175608 width=56) (actual time=0.012..32.118 rows=175608 loops=1) Planning Time: 0.790 ms Execution Time: 4390.494 ms\",\"Sort  (cost=8578.84..8581.34 rows=1000 width=64) (actual time=12244.543..12247.630 rows=21673 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 2631kB   InitPlan 1 (returns $0)     ->  Seq Scan on random_100_origin  (cost=0.00..2.00 rows=100 width=8) (actual time=0.014..0.032 rows=100 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on random_100_destination  (cost=0.00..2.00 rows=100 width=8) (actual time=0.315..0.340 rows=100 loops=1)   ->  GroupAggregate  (cost=8505.01..8525.01 rows=1000 width=64) (actual time=11383.791..12239.087 rows=21673 loops=1)         Group Key: b.ogc_fid, b.the_geom         ->  Sort  (cost=8505.01..8507.51 rows=1000 width=56) (actual time=11383.658..11871.002 rows=1787766 loops=1)               Sort Key: b.ogc_fid, b.the_geom               Sort Method: external merge  Disk: 109736kB               ->  Hash Left Join  (cost=8431.43..8455.18 rows=1000 width=56) (actual time=9526.664..10370.857 rows=1787766 loops=1)                     Hash Cond: (j.edge = b.ogc_fid)                     ->  Function Scan on pgr_astar j  (cost=0.25..10.25 rows=1000 width=8) (actual time=9457.479..9678.252 rows=1787766 loops=1)                     ->  Hash  (cost=6236.08..6236.08 rows=175608 width=56) (actual time=69.052..69.053 rows=175608 loops=1)                           Buckets: 262144  Batches: 1  Memory Usage: 16625kB                           ->  Seq Scan on porto_alegre_net_largest_astar b  (cost=0.00..6236.08 rows=175608 width=56) (actual time=0.013..29.050 rows=175608 loops=1) Planning Time: 0.373 ms Execution Time: 12319.547 ms\",\"Sort  (cost=8582.84..8585.34 rows=1000 width=64) (actual time=38249.748..38254.173 rows=28983 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 3259kB   InitPlan 1 (returns $0)     ->  Seq Scan on sampling_weight_200_origin  (cost=0.00..4.00 rows=200 width=8) (actual time=0.021..0.099 rows=200 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on sampling_weight_200_destination  (cost=0.00..4.00 rows=200 width=8) (actual time=0.018..0.095 rows=200 loops=1)   ->  GroupAggregate  (cost=8505.01..8525.01 rows=1000 width=64) (actual time=34639.396..38240.873 rows=28983 loops=1)         Group Key: b.ogc_fid, b.the_geom         ->  Sort  (cost=8505.01..8507.51 rows=1000 width=56) (actual time=34638.821..36809.853 rows=7071064 loops=1)               Sort Key: b.ogc_fid, b.the_geom               Sort Method: external merge  Disk: 434032kB               ->  Hash Left Join  (cost=8431.43..8455.18 rows=1000 width=56) (actual time=27677.391..30834.830 rows=7071064 loops=1)                     Hash Cond: (j.edge = b.ogc_fid)                     ->  Function Scan on pgr_astar j  (cost=0.25..10.25 rows=1000 width=8) (actual time=27609.426..28439.714 rows=7071064 loops=1)                     ->  Hash  (cost=6236.08..6236.08 rows=175608 width=56) (actual time=67.825..67.825 rows=175608 loops=1)                           Buckets: 262144  Batches: 1  Memory Usage: 16625kB                           ->  Seq Scan on porto_alegre_net_largest_astar b  (cost=0.00..6236.08 rows=175608 width=56) (actual time=0.013..28.690 rows=175608 loops=1) Planning Time: 0.591 ms Execution Time: 38444.056 ms\",\"Sort  (cost=8586.84..8589.34 rows=1000 width=64) (actual time=88849.452..88854.504 rows=32000 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 3518kB   InitPlan 1 (returns $0)     ->  Seq Scan on sampling_weight_300_origin  (cost=0.00..6.00 rows=300 width=8) (actual time=0.319..0.559 rows=300 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on sampling_weight_300_destination  (cost=0.00..6.00 rows=300 width=8) (actual time=0.247..0.453 rows=300 loops=1)   ->  GroupAggregate  (cost=8505.01..8525.01 rows=1000 width=64) (actual time=81044.287..88828.764 rows=32000 loops=1)         Group Key: b.ogc_fid, b.the_geom         ->  Sort  (cost=8505.01..8507.51 rows=1000 width=56) (actual time=81042.282..84664.286 rows=15922899 loops=1)               Sort Key: b.ogc_fid, b.the_geom               Sort Method: external merge  Disk: 977136kB               ->  Hash Left Join  (cost=8431.43..8455.18 rows=1000 width=56) (actual time=59212.329..66886.522 rows=15922899 loops=1)                     Hash Cond: (j.edge = b.ogc_fid)                     ->  Function Scan on pgr_astar j  (cost=0.25..10.25 rows=1000 width=8) (actual time=59108.049..61133.560 rows=15922899 loops=1)                     ->  Hash  (cost=6236.08..6236.08 rows=175608 width=56) (actual time=103.949..103.950 rows=175608 loops=1)                           Buckets: 262144  Batches: 1  Memory Usage: 16625kB                           ->  Seq Scan on porto_alegre_net_largest_astar b  (cost=0.00..6236.08 rows=175608 width=56) (actual time=0.014..46.570 rows=175608 loops=1) Planning Time: 6.017 ms Execution Time: 89211.976 ms\",\"Sort  (cost=8577.04..8579.54 rows=1000 width=64) (actual time=1657.330..1657.914 rows=5193 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 639kB   InitPlan 1 (returns $0)     ->  Seq Scan on random_10_origin  (cost=0.00..1.10 rows=10 width=8) (actual time=0.013..0.017 rows=10 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on random_10_destination  (cost=0.00..1.10 rows=10 width=8) (actual time=0.006..0.011 rows=10 loops=1)   ->  GroupAggregate  (cost=8505.01..8525.01 rows=1000 width=64) (actual time=1646.475..1656.284 rows=5193 loops=1)         Group Key: b.ogc_fid, b.the_geom         ->  Sort  (cost=8505.01..8507.51 rows=1000 width=56) (actual time=1646.457..1648.758 rows=18776 loops=1)               Sort Key: b.ogc_fid, b.the_geom               Sort Method: quicksort  Memory: 2230kB               ->  Hash Left Join  (cost=8431.43..8455.18 rows=1000 width=56) (actual time=1625.290..1637.499 rows=18776 loops=1)                     Hash Cond: (j.edge = b.ogc_fid)                     ->  Function Scan on pgr_bdastar j  (cost=0.25..10.25 rows=1000 width=8) (actual time=1542.172..1543.932 rows=18776 loops=1)                     ->  Hash  (cost=6236.08..6236.08 rows=175608 width=56) (actual time=82.998..82.999 rows=175608 loops=1)                           Buckets: 262144  Batches: 1  Memory Usage: 16625kB                           ->  Seq Scan on porto_alegre_net_largest_astar b  (cost=0.00..6236.08 rows=175608 width=56) (actual time=0.016..36.264 rows=175608 loops=1) Planning Time: 0.183 ms Execution Time: 1667.918 ms\",\"Sort  (cost=8577.84..8580.34 rows=1000 width=64) (actual time=27898.701..27900.875 rows=16075 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 1766kB   InitPlan 1 (returns $0)     ->  Seq Scan on random_50_origin  (cost=0.00..1.50 rows=50 width=8) (actual time=0.011..0.020 rows=50 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on random_50_destination  (cost=0.00..1.50 rows=50 width=8) (actual time=0.005..0.013 rows=50 loops=1)   ->  GroupAggregate  (cost=8505.01..8525.01 rows=1000 width=64) (actual time=27701.769..27895.244 rows=16075 loops=1)         Group Key: b.ogc_fid, b.the_geom         ->  Sort  (cost=8505.01..8507.51 rows=1000 width=56) (actual time=27701.732..27800.722 rows=435429 loops=1)               Sort Key: b.ogc_fid, b.the_geom               Sort Method: external merge  Disk: 26720kB               ->  Hash Left Join  (cost=8431.43..8455.18 rows=1000 width=56) (actual time=27225.949..27439.013 rows=435429 loops=1)                     Hash Cond: (j.edge = b.ogc_fid)                     ->  Function Scan on pgr_bdastar j  (cost=0.25..10.25 rows=1000 width=8) (actual time=27154.302..27208.107 rows=435429 loops=1)                     ->  Hash  (cost=6236.08..6236.08 rows=175608 width=56) (actual time=71.515..71.516 rows=175608 loops=1)                           Buckets: 262144  Batches: 1  Memory Usage: 16625kB                           ->  Seq Scan on porto_alegre_net_largest_astar b  (cost=0.00..6236.08 rows=175608 width=56) (actual time=0.013..30.185 rows=175608 loops=1) Planning Time: 0.230 ms Execution Time: 27935.192 ms\",\"Sort  (cost=8578.84..8581.34 rows=1000 width=64) (actual time=110353.698..110356.793 rows=22053 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 2664kB   InitPlan 1 (returns $0)     ->  Seq Scan on random_100_origin  (cost=0.00..2.00 rows=100 width=8) (actual time=0.015..0.032 rows=100 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on random_100_destination  (cost=0.00..2.00 rows=100 width=8) (actual time=0.011..0.028 rows=100 loops=1)   ->  GroupAggregate  (cost=8505.01..8525.01 rows=1000 width=64) (actual time=109525.205..110348.564 rows=22053 loops=1)         Group Key: b.ogc_fid, b.the_geom         ->  Sort  (cost=8505.01..8507.51 rows=1000 width=56) (actual time=109525.026..109992.182 rows=1791492 loops=1)               Sort Key: b.ogc_fid, b.the_geom               Sort Method: external merge  Disk: 109968kB               ->  Hash Left Join  (cost=8431.43..8455.18 rows=1000 width=56) (actual time=107588.397..108480.273 rows=1791492 loops=1)                     Hash Cond: (j.edge = b.ogc_fid)                     ->  Function Scan on pgr_bdastar j  (cost=0.25..10.25 rows=1000 width=8) (actual time=107508.414..107738.728 rows=1791492 loops=1)                     ->  Hash  (cost=6236.08..6236.08 rows=175608 width=56) (actual time=79.853..79.854 rows=175608 loops=1)                           Buckets: 262144  Batches: 1  Memory Usage: 16625kB                           ->  Seq Scan on porto_alegre_net_largest_astar b  (cost=0.00..6236.08 rows=175608 width=56) (actual time=0.013..34.527 rows=175608 loops=1) Planning Time: 0.387 ms Execution Time: 110424.801 ms\",\"Sort  (cost=8582.84..8585.34 rows=1000 width=64) (actual time=430749.390..430754.215 rows=29645 loops=1)   Sort Key: (count(b.the_geom)) DESC   Sort Method: quicksort  Memory: 3316kB   InitPlan 1 (returns $0)     ->  Seq Scan on sampling_weight_200_origin  (cost=0.00..4.00 rows=200 width=8) (actual time=0.013..0.051 rows=200 loops=1)   InitPlan 2 (returns $1)     ->  Seq Scan on sampling_weight_200_destination  (cost=0.00..4.00 rows=200 width=8) (actual time=0.008..0.268 rows=200 loops=1)   ->  GroupAggregate  (cost=8505.01..8525.01 rows=1000 width=64) (actual time=427198.758..430740.610 rows=29645 loops=1)         Group Key: b.ogc_fid, b.the_geom         ->  Sort  (cost=8505.01..8507.51 rows=1000 width=56) (actual time=427198.229..429342.776 rows=7075521 loops=1)               Sort Key: b.ogc_fid, b.the_geom               Sort Method: external merge  Disk: 434304kB               ->  Hash Left Join  (cost=8431.43..8455.18 rows=1000 width=56) (actual time=420326.169..423368.515 rows=7075521 loops=1)                     Hash Cond: (j.edge = b.ogc_fid)                     ->  Function Scan on pgr_bdastar j  (cost=0.25..10.25 rows=1000 width=8) (actual time=420251.562..421080.272 rows=7075521 loops=1)                     ->  Hash  (cost=6236.08..6236.08 rows=175608 width=56) (actual time=74.446..74.447 rows=175608 loops=1)                           Buckets: 262144  Batches: 1  Memory Usage: 16625kB                           ->  Seq Scan on porto_alegre_net_largest_astar b  (cost=0.00..6236.08 rows=175608 width=56) (actual time=0.017..31.956 rows=175608 loops=1) Planning Time: 0.440 ms Execution Time: 430940.623 ms\"]],\"container\":\"<table class=\\\"compact\\\">\\n  <thead>\\n    <tr>\\n      <th>number_od<\\/th>\\n      <th>algorithm<\\/th>\\n      <th>time<\\/th>\\n      <th>query<\\/th>\\n      <th>analyze<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"order\":[[0,\"asc\"],[2,\"asc\"]],\"rowGroup\":{\"dataSrc\":0},\"dom\":\"Bfrtip\",\"columnDefs\":[{\"visible\":false,\"targets\":[3,4]},{\"className\":\"dt-right\",\"targets\":[0,2]},{\"name\":\"number_od\",\"targets\":0},{\"name\":\"algorithm\",\"targets\":1},{\"name\":\"time\",\"targets\":2},{\"name\":\"query\",\"targets\":3},{\"name\":\"analyze\",\"targets\":4}],\"buttons\":[\"copy\",\"csv\",\"pdf\"],\"initComplete\":\"function(settings, json) {\\n$(this.api().table().header()).css({'background-color': '#d50038', 'color': '#fff'});\\n}\",\"autoWidth\":false,\"orderClasses\":false,\"rowCallback\":\"function(row, data, displayNum, displayIndex, dataIndex) {\\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'background':isNaN(parseFloat(value)) || value <= 620.371000 ? '' : 'linear-gradient(90.000000deg, transparent ' + Math.max(430940.623000 - value, 0)/430320.252000 * 100 + '%, #ee8b8b ' + Math.max(430940.623000 - value, 0)/430320.252000 * 100 + '%)','background-size':'98% 88%','background-repeat':'no-repeat','background-position':'center'});\\n}\"}},\"evals\":[\"options.initComplete\",\"options.rowCallback\"],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n\n## 10\n\n::: {.cell}\n\n```{.sql .cell-code}\n\n```\n:::\n\n\n\n## 50\n\n::: {.cell}\n\n```{.sql .cell-code}\n\n```\n:::\n\n\n\n## 100\n\n\n::: {.cell}\n\n```{.sql .cell-code}\n\n```\n:::\n\n\n\n## 200\n\n\n::: {.cell}\n\n```{.sql .cell-code}\n---- Create 200 origin\nCREATE TABLE sampling_weight_200_origin  AS\nwith porto_200_origin AS (\n        SELECT\n            * \n        FROM \n            od_2728_snapped_origin \n        ORDER BY random() LIMIT 200)\n        SELECT * FROM  porto_200_origin;  \n---- Create 200 destination\nCREATE TABLE sampling_weight_200_destination  AS\nwith porto_200_destination AS (\n        SELECT\n            * \n        FROM \n            od_2728_snapped_origin \n        ORDER BY random() LIMIT 200)\n        SELECT * FROM  porto_200_destination;  \n---- Create index for origin\nCREATE INDEX idx_sampling_weight_200_origin_net_id ON sampling_weight_200_origin USING hash(net_id);\nCREATE INDEX idx_sampling_weight_200_origin_geom ON sampling_weight_200_origin USING gist(the_geom);\n---- Create index for destination\nCREATE INDEX idx_sampling_weight_200_destination_net_id ON sampling_weight_200_destination USING hash(net_id);\nCREATE INDEX idx_sampling_weight_200_destination_geom ON sampling_weight_200_destination USING gist(the_geom);\n---- Cluster\nCLUSTER porto_alegre_net_largest USING idx_porto_alegre_net_largest_geom;\n---- Vacuum clean\nVACUUM(full, ANALYZE) sampling_weight_200_origin;\nVACUUM(full, ANALYZE) sampling_weight_200_destination;\nVACUUM(full, ANALYZE) porto_alegre_net_largest;\n--- Run query\n\nEXPLAIN ANALYZE\n CREATE TABLE centrality_200_200_porto AS\n SELECT   b.ogc_fid,\n b.the_geom,\n count(the_geom) as centrality \n FROM  pgr_dijkstra('SELECT  ogc_fid AS id,\n\t\t\t\t\t\t\t  fromid AS source,\n\t\t\t\t\t\t\ttoid AS target,\n\t\t\t\t\t\t\tweight AS cost\n\t\t\t\t      FROM porto_alegre_net_largest',\n\t\t\t\t      ARRAY(SELECT net_id AS start_id FROM porto_200_origin  ),\n\t\t\t\t      ARRAY(SELECT net_id AS end_id FROM porto_200_destination ),\n\t\t\t\t      directed := TRUE) j\n\t\t\t\t      left JOIN porto_alegre_net_largest AS b\n\t\t\t\t      ON j.edge = b.ogc_fid\n\t\t\t\t      GROUP BY  b.ogc_fid, b.the_geom\n\t\t\t\t      ORDER BY centrality DESC;  \n```\n:::\n\n\n## 300 \n\n\n::: {.cell}\n\n```{.sql .cell-code}\n\n---- 300\n\n---- Create 300 origin\nCREATE TABLE sampling_weight_300_origin  AS\nwith porto_300_origin AS (\n        SELECT\n            * \n        FROM \n            od_2728_snapped_origin \n        ORDER BY random() LIMIT 300)\n        SELECT * FROM  porto_300_origin;  \n---- Create 300 destination\nCREATE TABLE sampling_weight_300_destination  AS\nwith porto_300_destination AS (\n        SELECT\n            * \n        FROM \n            od_2728_snapped_origin \n        ORDER BY random() LIMIT 300)\n        SELECT * FROM  porto_300_destination;  \n---- Create index for origin\nCREATE INDEX idx_sampling_weight_300_origin_net_id ON sampling_weight_300_origin USING hash(net_id);\nCREATE INDEX idx_sampling_weight_300_origin_geom ON sampling_weight_300_origin USING gist(the_geom);\n---- Create index for destination\nCREATE INDEX idx_sampling_weight_300_destination_net_id ON sampling_weight_300_destination USING hash(net_id);\nCREATE INDEX idx_sampling_weight_300_destination_geom ON sampling_weight_300_destination USING gist(the_geom);\n---- Cluster\nCLUSTER porto_alegre_net_largest USING idx_porto_alegre_net_largest_geom;\n---- Vacuum clean\nVACUUM(full, ANALYZE) sampling_weight_300_origin;\nVACUUM(full, ANALYZE) sampling_weight_300_destination;\nVACUUM(full, ANALYZE) porto_alegre_net_largest;\n--- Run query\n\n EXPLAIN ANALYZE\n CREATE TABLE centrality_300_300_porto AS\n SELECT   b.ogc_fid,\n b.the_geom,\n count(the_geom) as centrality \n FROM  pgr_dijkstra('SELECT  ogc_fid AS id,\n\t\t\t\t\t\t\t  fromid AS source,\n\t\t\t\t\t\t\ttoid AS target,\n\t\t\t\t\t\t\tweight AS cost\n\t\t\t\t      FROM porto_alegre_net_largest',\n\t\t\t\t      ARRAY(SELECT net_id AS start_id FROM sampling_weight_300_origin  ),\n\t\t\t\t      ARRAY(SELECT net_id AS end_id FROM sampling_weight_300_destination ),\n\t\t\t\t      directed := TRUE) j\n\t\t\t\t      left JOIN porto_alegre_net_largest AS b\n\t\t\t\t      ON j.edge = b.ogc_fid\n\t\t\t\t      GROUP BY  b.ogc_fid, b.the_geom\n\t\t\t\t      ORDER BY centrality DESC;  \n\t\t\t\t      \n--- check max centrality\t\t\t\t     \nSELECT max(centrality) FROM centrality_300_300_porto ;\n--- check max rows\nSELECT  count(*) FROM centrality_10_10_porto;\n```\n:::\n\n\n\n## Method array_agg()\n\n\n::: {.cell}\n\n```{.sql .cell-code}\n\n---- create origin_destination\nCREATE TEMP TABLE vertices_lookup_10\nAS             \nWITH all_pairs AS (\n  SELECT f.net_id AS fid, f.the_geom AS fgeom,\n         t.net_id AS tid, t.the_geom AS tgeom\n    FROM random_10_origin AS f,\n         random_10_destination AS t\n),\nvertices AS (\n  SELECT fid, tid,\n     (SELECT id\n        FROM porto_alegre_net_largest_vertices_pgr AS way\n       ORDER BY way.the_geom <-> fgeom\n       LIMIT 1) AS fv,\n     (SELECT id\n        FROM porto_alegre_net_largest_vertices_pgr AS way\n       ORDER BY way.the_geom <-> tgeom\n       LIMIT 1) AS tv\n  FROM all_pairs\n)\nSELECT * FROM vertices;\n---- Number of OD\nSELECT count(*) FROM vertices_lookup_10;\n---- Create index\nCREATE INDEX idx_vertices_lookup_10_fid ON vertices_lookup_10 USING hash(fid);\nCREATE INDEX idx_vertices_lookup_10_tid ON vertices_lookup_10 USING hash(tid);\nCREATE INDEX idx_vertices_lookup_10_fv ON vertices_lookup_10 USING hash(fv);\nCREATE INDEX idx_vertices_lookup_10_tv ON vertices_lookup_10 USING hash(tv);\n---- Vacuum and clean\nVACUUM(full, ANALYZE) vertices_lookup_10;\nVACUUM(full, ANALYZE) porto_alegre_net_largest;\n---- Run query using array_agg()\nEXPLAIN ANALYZE\nCREATE TABLE porto_100_dijkstra_agg AS\nWITH pgr_result AS (\n  SELECT pgr_dijkstra('SELECT ogc_fid AS id,\n\t         fromid AS source,\n\t\t\ttoid AS target,\n\t\t\t weight AS cost FROM porto_alegre_net_largest',\n    array_agg(fv), array_agg(tv), \n    directed := true\n  ) FROM vertices_lookup_10 \n) \nSELECT \n b.ogc_fid,\n b.the_geom,\n count(the_geom) as centrality \nFROM pgr_result\nLEFT JOIN porto_alegre_net_largest AS b\nON (pgr_dijkstra).edge = b.ogc_fid\nGROUP BY \n\tthe_geom, b.ogc_fid\nORDER BY \n\tcentrality DESC;\n---- Max centrality value\nselect max(centrality) FROM porto_100_dijkstra_agg ;\n---- Number of rows\nselect count(*) FROM porto_100_dijkstra_agg ;\n```\n:::\n\n\n## pgr_astrar()\n\n\n::: {.cell}\n\n```{.sql .cell-code}\nSELECT * FROM random_10_origin ro ;\n \nCREATE TABLE porto_alegre_net_largest_astar AS\t\t    \nWITH porto_alegre_net_astart AS (\nSELECT \n*,\nst_startpoint(the_geom) AS start_pt,\nst_endpoint(the_geom) AS end_pt\nFROM porto_alegre_net_largest AS net)\nSELECT *,\n\tst_x(start_pt) AS x1,\n\tst_y(start_pt) AS y1,\n\tst_x(end_pt) AS x2,\n\tst_y(end_pt) AS y2\nFROM porto_alegre_net_astart;\n---- adding spatial index\nCREATE INDEX idx_porto_alegre_net_largest_astar_net_the_geom ON porto_alegre_net_largest_astar  USING gist(the_geom);\nCREATE INDEX idx_porto_alegre_net_largest_astar_net_start ON porto_alegre_net_largest_astar  USING gist(start_pt);\nCREATE INDEX idx_porto_alegre_net_largest_astar_net_end ON porto_alegre_net_largest_astar USING gist(end_pt);\nCREATE INDEX idx_porto_alegre_net_largest_astar_net_x1 ON porto_alegre_net_largest_astar  USING btree(x1);\nCREATE INDEX idx_porto_alegre_net_largest_astar_net_y1 ON porto_alegre_net_largest_astar USING btree(y1);\nCREATE INDEX idx_porto_alegre_net_largest_astar_net_x2 ON porto_alegre_net_largest_astar USING btree(x2);\nCREATE INDEX idx_porto_alegre_net_largest_astar_net_y2 ON porto_alegre_net_largest_astar USING btree(y2);                      \n----- RUnning the query\nEXPLAIN ANALYZE\nCREATE TABLE centrality_10_10_porto_astrar AS\nSELECT  \n\tb.ogc_fid,\n\t b.the_geom,\n \tcount(the_geom) as centrality \nFROM pgr_astar(\n\t'SELECT ogc_fid AS id,\n\t\t\tfromid AS source,\n\t\t\ttoid AS target,\n\t\t\tweight AS cost,\n\t\t\tx1,\n\t\t\ty1,\n\t\t\tx2,\n\t\t\ty2\n\tFROM porto_alegre_net_largest_astar',\n\tARRAY(SELECT net_id FROM  random_10_origin),\n\tARRAY(SELECT net_id FROM  random_10_destination),\n\t\t     directed:=TRUE,\n\t\t     heuristic:=2) j\n                      left JOIN porto_alegre_net_largest_astar AS b\n                      ON j.edge = b.ogc_fid\n                      GROUP BY  b.ogc_fid, b.the_geom\n                      ORDER BY centrality DESC;  \n\n--- check max centrality                     \nSELECT max(centrality) FROM centrality_10_10_porto_astrar ;\n--- check max rows\nSELECT  count(*) FROM centrality_10_10_porto_astrar;\n```\n:::\n",
    "supporting": [
      "appendix_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/datatables-binding-0.33/datatables.js\"></script>\n<script src=\"site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n<script src=\"site_libs/pdfmake-1.13.6/pdfmake.js\"></script>\n<script src=\"site_libs/pdfmake-1.13.6/vfs_fonts.js\"></script>\n<link href=\"site_libs/dt-ext-buttons-1.13.6/css/buttons.dataTables.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/dt-ext-buttons-1.13.6/js/dataTables.buttons.min.js\"></script>\n<script src=\"site_libs/dt-ext-buttons-1.13.6/js/buttons.html5.min.js\"></script>\n<script src=\"site_libs/dt-ext-buttons-1.13.6/js/buttons.colVis.min.js\"></script>\n<script src=\"site_libs/dt-ext-buttons-1.13.6/js/buttons.print.min.js\"></script>\n<link href=\"site_libs/dt-ext-rowgroup-1.13.6/css/rowGroup.dataTables.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/dt-ext-rowgroup-1.13.6/js/dataTables.rowGroup.min.js\"></script>\n<link href=\"site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}